#  _   _                  _                 _
# | | | |_   _ _ __  _ __| | __ _ _ __   __| |
# | |_| | | | | '_ \| '__| |/ _` | '_ \ / _` |
# |  _  | |_| | |_) | |  | | (_| | | | | (_| |
# |_| |_|\__, | .__/|_|  |_|\__,_|_| |_|\__,_|
#        |___/|_|
#
# -----------------------------------------------------

# -----------------------------------------------------
# Monitor
# -----------------------------------------------------
monitor = , 2880x1800@90, auto, 1.6

# -----------------------------------------------------
# Cursor
# -----------------------------------------------------
exec-once = hyprctl setcursor breeze_cursors 24

# -----------------------------------------------------
# Environment 
# -----------------------------------------------------
source = ~/.config/hypr/conf/env.conf

# -----------------------------------------------------
# Keyboard Layout
# https://wiki.hyprland.org/Configuring/Variables/#input
# -----------------------------------------------------
input {
    kb_layout = us
#   kb_variant = 
#   kb_model =
#   kb_options =
    numlock_by_default = true
    follow_mouse = 1
    mouse_refocus=false
    touchpad {
        natural_scroll = true
        scroll_factor = 1.0  # Touchpad scroll factor
        disable_while_typing = true
    }
    sensitivity = 0 # Pointer speed: -1.0 - 1.0, 0 means no modification.
}

# -----------------------------------------------------
# Load color file
# -----------------------------------------------------
source = ~/.config/hypr/colors.conf
$color8 = $primary
$color11 = $on_surface

# -----------------------------------------------------
# Autostart
# -----------------------------------------------------
exec-once=~/.config/ml4w/listeners.sh --startall                    # Start Listeners
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 # Start Polkit
exec-once = ~/.config/hypr/scripts/wallpaper-restore.sh             # Load Wallpaper
exec-once = swaync                                                  # Load Notification Daemon
exec-once = ~/.config/hypr/scripts/gtk.sh                           # Load GTK settings
exec-once = hypridle                                                # Using hypridle to start hyprlock
exec-once = wl-paste --watch cliphist store                         # Load cliphist history
exec-once = ~/.config/ml4w/scripts/ml4w-autostart.sh                # Autostart ML4W App
exec-once = ~/.config/hypr/scripts/cleanup.sh                       # Start autostart cleanup
exec = ~/.config/com.ml4w.hyprlandsettings/hyprctl.sh               # Load configuration from ML4W Hyprland Settings App

# -----------------------------------------------------
# General window layout and colors
# -----------------------------------------------------

general {
    gaps_in = 2
    gaps_out = 5
    border_size = 4
    col.active_border = $color8
    col.inactive_border = $color11
    layout = dwindle
    resize_on_border = true
}

# -----------------------------------------------------
# General window decoration
# -----------------------------------------------------

decoration {
    rounding = 8 
    active_opacity = 1.0
    inactive_opacity = 1.0 
    dim_inactive = true
    dim_strength = 0.1

    blur {
        enabled = true
        size = 3
        passes = 4
        new_optimizations = on
        ignore_opacity = true
        xray = true
    }

    shadow {
        enabled = true
        range = 10
        render_power = 2
        color = 0x33000000
    }
}

layerrule = blur, waybar

# -----------------------------------------------------
# Layouts
# -----------------------------------------------------

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    # Commented out due to compatibility reasons
    # new_status = master
}

gesture = 3, horizontal, workspace
#gesture = 3, left, dispatcher, cyclenext
#gesture = 3, right, dispatcher, cycleprev

binds {
  workspace_back_and_forth = false
  allow_workspace_cycles = true
  pass_mouse_when_bound = false
}

# -----------------------------------------------------
# Misc settings
# -----------------------------------------------------

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    initial_workspace_tracking = 1
}

# -----------------------------------------------------
# Environment for xdg-desktop-portal-hyprland
# -----------------------------------------------------
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# -----------------------------------------------------
# Load other config files
# -----------------------------------------------------

source = ~/.config/hypr/conf/animation.conf
source = ~/.config/hypr/conf/keybinding.conf
source = ~/.config/hypr/conf/other.conf
source = ~/.config/hypr/conf/windowrule.conf
source = ~/.config/hypr/conf/workspace.conf
